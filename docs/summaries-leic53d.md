# Lesson 1 - 2022-09-11

- Course presentation
    - [_Ficha de Unidade Curricular_](https://www.isel.pt/sites/default/files/FUC_LEIC/5sem/DAW_LEIC.pdf)
    - Moodle pages
    - [Course](https://2324moodle.isel.pt/course/view.php?id=7492)
    - [Course section](https://2324moodle.isel.pt/course/view.php?id=7565)
    - [Github repository](https://github.com/isel-leic-daw/s2324i-52d-53d-public)
        - [docs](https://github.com/isel-leic-daw/s2324i-52d-53d-public/tree/main/docs)
            - [calendar](https://github.com/isel-leic-daw/s2324i-52d-53d-public/blob/main/docs/calendar.md)
            - [evaluation](https://github.com/isel-leic-daw/s2324i-52d-53d-public/blob/main/docs/evaluation.md)
            - [resource](https://github.com/isel-leic-daw/s2324i-52d-53d-public/blob/main/docs/resources.md)

# Lesson 2 - 2022-09-15

- Spring Boot
    - [Spring Initializr](https://start.spring.io)
        - [Example](https://start.spring.io/#!type=gradle-project&language=kotlin&platformVersion=2.7.3&packaging=jar&jvmVersion=17&groupId=com.example&artifactId=demo&name=demo&description=Demo%20project%20for%20Spring%20Boot&packageName=com.example.demo&dependencies=web)
    - Analysis of the project generated by [Spring Initializr](https://start.spring.io)
        - Typical Gradle-based JVM project.
        - Included libraries - Spring, Jackson, and Kotlin.
        - Included gradle plugins.
        - `main` function and the `@SpringBootApplication` _application class_.
    - Adding HTTP request handling.
        - _handler_ - method that procudes _response information_ based on _request information_
            - Typically defined as an instance function (i.e. method) **without** a predefined type signature.
            - With additional metadata provided as annotations, to associate it to HTTP request methods and URI path templates.
        - _controller_ - a container of handlers.

- Inversion of Control, Dependency Injection and the Spring Context library
    - Class stereotypes.
        - Containers of functionality (components) vs containers of data.
    - Dependency relations between _dependents_ and a _ dependencies_.
        - Instance of component `A` requires a instance of component `B` to operate, `A` depends on `B`.
    - Inversion of Control (IoC).
        - `A` does not create instances of `B`. Instead, `A` receives (is injected with) instances of `B`, created outside the `A` control.
    - Dependency Injection (DI).
        - The mechanism by which a dependent receives its dependencies.
        - **Constructor injection** - dependencies are passed in as constructor arguments and stored on immutable fields.
            - The preferable way of dependency injection.
        - **Field or property injection** - dependencies are passed in **after** object creation, via the assignment of fields or the executions of property setter methods.
            - Requires mutable dependency fields.
            - Objects are not ready to operate after construction.
            - Use only when constructor injection is not possible.
    - Object composition.
        - Components instance and their dependency relations define a graph.
        - Creating this graph can be done by:
            - Manually defined code.
            - Automatically, by using a DI container.
    - Spring Context is a DI container.
        - Given a set of **type** information, including their dependencies, it creates the graph of component **instances**.
    - Container independence.
        - The component design should be independent of the the container usage.
    - Spring Framework documentation
        - [https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core]
        - [https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-annotation-config]

# Lesson 3 - 2022-09-18

- The Servlet specification.
    - Allow request handlers (servlets) and intermediaries (filters) to run on multiple web servers, the so called servlet containers.
    - [Jakarta Specifications](https://jakarta.ee/specifications/servlet/).
    - Servlet
        - Final handler for an HTTP request.
        - Methods that receive
            - An `HttpServletRequest` representing the request information.
            - An `HttpServletResponse` with the response information produced so far.
    - Filter
        - Intermediary that can perform:
            - Pre-processing, before the request-response pair is passed in to the next intermediary or final handler.
            - Post-processinf, after the next intermediary or final handler returned
            - Short-circuit the request processing, by not calling the next intermediary or final handler.
- Spring MVC (Model-View-Controller)
    - [Documentation](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#spring-web)
    - Servlet-based architecture
        - Single [`DispatcherServlet`](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-servlet) mapped to all paths.
        - Servlet container initialization and servlet mapping is done by Spring Boot.
        - This pattern is sometimes named [_front controller_](https://www.martinfowler.com/eaaCatalog/frontController.html).
        - `HttpServletRequest` and `HttpServletResponse` are the base for all request and response interaction.
        - It is possible to use filters (defined according to the servlet interface).

# Lesson 4 - 2022-09-22

- Spring MVC (Model-View-Controller)
    - Intercepting requests via filters and handler interceptors.
        - Differences on the programming models and capabilities.
        - The `HttpServletRequest` attributes bag.
     
# Lesson 5 - 2022-09-25

- System architecture for the DAW project
    - Backend service component and frontend client component.
    - Responsabilities of each component.
        - Backend service is responsible to ensure data integrity, namely that all domain rules are correctly enforced.
            - Data integrity and domain rule enforcement does not depend on the correct behaviour of the frontend application.
                - However correctness of the frontend application is required to ensure all operations correctly reflect user behavior.
        - Frontend client component is responsible for the user interaction.
    - Interaction between frontend applications and backend service done via an HTTP API, provided by the backend service.
        - HTTP API follows a request-response messaging pattern, at least during the first phase
            - The communication initiative is always on the API's client, i.e., the frontend application.
            - The backend service only communicates information to the frontend service in the context of an HTTP response.
            - Implies polling by the frontend application to check for asynchronous state changes.

- Backend service architecture
    - A Postgres DBMS, holding all the relevant system state, such as users, games, and boards. 
    - One or more servers, running a JVM-based application, hosting the HTTP request handling logic, domain logic, and interaction with the DBMS.
    - A load-balancer, exposing the publicly accessible network endpoint with the HTTP API, and forwarding the requests to one of the servers.
    - A consequence of this load-balancing based architecture is that the servers need to be mostly stateless.
        - Do not hold system state, such as users and games.
        - Only hold configuration and inter-request processing state.

- Server architecture
    - Use of the Spring framework.
    - HTTP processing pipeline with intermediaries containing common processing.
        E.g. authentication token handling, handler argument resolving.
    - Handlers, defined in controllers, resposible for the specific HTTP request handling.
    - Services, used by handlers with the domain logic.
        - Services are independent of the interface being an HTTP API (i.e. they don't know anything about HTTP).
        - Services are independent of the persistence interface (i.e. they don't know anything about relational databases or JDBC).
    - Repositories, responsible for data persistence and retrieval.

- Designing the interactions between handlers, services, and repositories.
    - Defining the transaction boundaries and associated design options.
